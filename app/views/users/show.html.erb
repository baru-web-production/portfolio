<!-- プロフィール -->
<section class="profile">
    <div class="profile__wrapper">
        <div class="profile__circle">
            <% if @user.icon? %>
                <%= image_tag @user.icon.thumb.url, class: "profile__circle--img" %>
            <% else %>
                <%= image_tag "default_icon.jpg", class: "profile__circle--img" %>
            <% end %>
        </div>
        <h2 class="profile__name">
            <%= @user.name %>
            <span class="profile__name--grade"> / </span><br class="profile__name--grade_br">高校 <%= get_grade(@user) %> 年生
        </h2>
        <% if current_user? %>
            <%= button_tag "ブログを書く", onclick: "location.href='/articles/new'", type: "button", class: "profile__button" %>
        <% end %>
    </div>
</section>
<!-- 記事一覧 -->
<div class="articles_list">
    <div class="articles_list__title">
        <span class="articles_list__title--line"></span>
        <h2 class="articles_list__title--text">記事一覧</h2>
        <span class="articles_list__title--line"></span>
    </div>
    <% unless @articles.empty? %>
        <% @articles.each do |article| %>
            <article class="article_items article_items_margin">
                <div class="article_items__wrapper">
                    <time class="article_items__wrapper--time">
                        <%= time_ago_in_words(article.created_at)+"前" %>
                    </time>
                    <% if article.image? %>
                        <%= image_tag article.image.url, class: "article_items__wrapper--img" %>
                    <% else %>
                        <%= image_tag "article_details_no_img.jpg", class: "article_items__wrapper--img" %>
                    <% end %>
                    <div id="favorite_<%= article.id %>">
                        <%= render "shared/favorite", article: article  %>
                    </div>
                </div>
                <div class="article_items__text">
                    <h3 class="article_items__text--title">
                        <%= link_to article.title.truncate(24), article_path(article), class: "article_items__text--title_hover" %>
                    </h3>
                    <p class="article_items__text--overview">
                        <%= article.content.truncate(52) %>
                    </p>
                    <% if current_user? %>
                        <div class="article_items__button">
                            <%= link_to "編集", edit_article_path(article), class: "article_items__button--edit", "data-turbolinks": false %>
                            <%= link_to "削除", article, method: :delete, data: { confirm: "本当に記事を削除しますか？" }, class: "article_items__button--delete" %>
                        </div>
                    <% else %>
                        <%= link_to @user.name, @user, class: "article_items__text--name" %>
                        <%= link_to " / 高校 #{get_grade(@user)} 年生", @user, class: "article_items__text--name article_items__text--grade" %>
                        <div class="article_items__favorite_count">
                            <%= article.favorites.count %>
                            <span class="article_items__favorite_count--like">Like</span>
                        </div>
                    <% end %>
                </div>
            </article>
        <% end %>
        <%= paginate @articles %>
    <% else %>
        <p class="articles_list__no_articles">記事はまだありません</p>
    <% end %>
</div>